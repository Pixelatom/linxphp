Controllers
===========

A Controller is a class file that stands in between the models and the views in an application. It passes information on to the model when data needs to be changed and it requests information from the model when data needs to be loaded. Controllers then pass on the information of the model to the views where the final output can be rendered for the users. Controllers essentially control the flow of the application.

Controllers are called by the Application::route() function based on the Route that the url matched. Be sure to read the *routing documentation* to understand how to use routes to map urls to your controllers.

Creating Controllers
--------------------

In order to function, a controller must do the following:

* Reside in applications/controllers (or a sub-directory)
* Filename must be lowercase, e.g. articles.php
* The class name must map to the filename, finish in 'Controller' and each word is capitalized
* Must have the Controller class as a (grand)parent

Some examples of controller names and filename:

	// application/controllers/admin.php
	class AdminController extends Controller {

Controllers can be in sub-folders and extends other controllers.
You can also have a controller extend another controller to share common things, such as requiring you to be logged in to use all of those controllers.

	// application/controllers/admin.php
	class AdminController extends Controller {
		// This controller would have a checks if the user is logged in
	 
	// application/controllers/plugins.php
	class PluginsController extends AdminController {
		// Because this controller extends AdminController, it would have the same logged in check

Routing
-------

LinxPHP provides a very powerful routing system. In essence, routes provide an interface between the urls and your controllers and actions. With the correct routes you could make almost any url scheme correspond to almost any arrangement of controllers, and you could change one without impacting the other.

### LinxPHP URLs

URLs in Linx are composed of segments. A typical segmented URL is http://localhost/directory/control/action/arg1/arg2

The segments correspond (in order ) to a directory (optional), a controller, a controller method, and the method arguments.

* Example *

	http://localhost/index.php?route=/admin/users/edit/1
	// or the same URL with url rewriting on
	http://localhost/admin/users/edit/1

Linx can interpretate this URL in many different ways, depending on how the controller files are stored and organized on the application/controllers folder.

an example on some possible controller organization can be:

* application/controllers/index.php
  - IndexController, the controller class
  - admin, the public method
  - edit, the first argument
  - 1, the second argument  
* application/controllers/admin.php
  - AdminController, the controller class
  - users, the public method
  - edit, the first argument
  - 1. the second argument
* application/controllers/admin/index.php
  - admin, the directory
  - IndexController, the controller class
  - users, the public method
  - edit, the first argument
  - 1. the second argument
* application/controllers/admin/users.php
  - admin, the directory
  - UsersController, the controller class
  - edit, the public method  
  - 1. the first argument
  
Using directories, you can build urls as long as you want. 
As you can see, you can build an URL in many different ways, but when Linx finds a suitable conbination, it stops searching for more.

If a non-existing combination is set for the url, it'll trigger a 404.

Note: You cannot pass arguments to an index method.

### URL rewriting

By default, Linx urls contain index.php. This does not look very nice and also is not optimized for search engines. See the difference between the following urls.

	http://localhost/index.php/articles/edit/1/my-first-article
	// or the same URL with url rewriting on
	http://localhost/articles/edit/1/my-first-article

The latter looks nicer and is SEO proof.

There is an example .htaccess included with Linx, which should be part of your installation files.


